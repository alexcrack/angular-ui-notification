/**
 * angular-ui-notification - Angular.js service providing simple notifications using Bootstrap 3 styles with css transitions for animating
 * @author Alex_Crack
 * @version v0.3.6
 * @link https://github.com/alexcrack/angular-ui-notification
 * @license MIT
 */
angular.module("ui-notification",[]),angular.module("ui-notification").provider("Notification",function(){this.options={delay:5e3,startTop:10,startRight:10,verticalSpacing:10,horizontalSpacing:10,positionX:"right",positionY:"top",replaceMessage:!1,templateUrl:"angular-ui-notification.html",onClose:void 0,closeOnClick:!0,maxCount:0,container:"body",priority:10},this.setOptions=function(t){if(!angular.isObject(t))throw new Error("Options should be an object!");this.options=angular.extend({},this.options,t)},this.$get=["$timeout","$http","$compile","$templateCache","$rootScope","$injector","$sce","$q","$window",function(t,i,e,n,o,s,a,l,r){var p=this.options,c=p.startTop,d=p.startRight,u=p.verticalSpacing,m=p.horizontalSpacing,f=p.delay,g=[],h=!1,y=["primary","error","success","info","warning"],C=function(s,y){function C(i){function n(t){["-webkit-transition","-o-transition","transition"].forEach(function(i){C.css(i,t)})}var o=y.scope.$new();o.message=a.trustAsHtml(y.message),o.title=a.trustAsHtml(y.title),o.t=y.type.substr(0,1),o.delay=y.delay,o.onClose=y.onClose;var s=function(t,i){return t._priority-i._priority},l=function(t,i){return i._priority-t._priority},f=function(){var t=0,i=0,e=c,n=d,o=[];"top"===y.positionY?g.sort(s):"bottom"===y.positionY&&g.sort(l);for(var a=g.length-1;a>=0;a--){var r=g[a];if(y.replaceMessage&&a<g.length-1)r.addClass("killed");else{var f=parseInt(r[0].offsetHeight),h=parseInt(r[0].offsetWidth),C=o[r._positionY+r._positionX];v+f>window.innerHeight&&(C=c,i++,t=0);var v=e=C?0===t?C:C+u:c,_=n+i*(m+h);r.css(r._positionY,v+"px"),"center"==r._positionX?r.css("left",parseInt(window.innerWidth/2-h/2)+"px"):r.css(r._positionX,_+"px"),o[r._positionY+r._positionX]=v+f,p.maxCount>0&&g.length>p.maxCount&&0===a&&r.scope().kill(!0),t++}}},C=e(i)(o);C._positionY=y.positionY,C._positionX=y.positionX,C._priority=y.priority,C.addClass(y.type);var _=function(t){t=t.originalEvent||t,("click"===t.type||"opacity"===t.propertyName&&t.elapsedTime>=1)&&(o.onClose&&o.$apply(o.onClose(C)),C.remove(),g.splice(g.indexOf(C),1),o.$destroy(),f())};y.closeOnClick&&(C.addClass("clickable"),C.bind("click",_)),C.bind("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd",_),angular.isNumber(y.delay)&&t(function(){C.addClass("killed")},y.delay),n("none"),angular.element(document.querySelector(y.container)).append(C);var b=-(parseInt(C[0].offsetHeight)+50);if(C.css(C._positionY,b+"px"),g.push(C),"center"==y.positionX){var k=parseInt(C[0].offsetWidth);C.css("left",parseInt(window.innerWidth/2-k/2)+"px")}t(function(){n("")}),o._templateElement=C,o.kill=function(i){i?(o.onClose&&o.$apply(o.onClose(o._templateElement)),g.splice(g.indexOf(o._templateElement),1),o._templateElement.remove(),o.$destroy(),t(f)):o._templateElement.addClass("killed")},t(f),h||(angular.element(r).bind("resize",function(i){t(f)}),h=!0),v.resolve(o)}var v=l.defer();"object"==typeof y&&null!==y||(y={message:y}),y.scope=y.scope?y.scope:o,y.template=y.templateUrl?y.templateUrl:p.templateUrl,y.delay=angular.isUndefined(y.delay)?f:y.delay,y.type=s||y.type||p.type||"",y.positionY=y.positionY?y.positionY:p.positionY,y.positionX=y.positionX?y.positionX:p.positionX,y.replaceMessage=y.replaceMessage?y.replaceMessage:p.replaceMessage,y.onClose=y.onClose?y.onClose:p.onClose,y.closeOnClick=null!==y.closeOnClick&&void 0!==y.closeOnClick?y.closeOnClick:p.closeOnClick,y.container=y.container?y.container:p.container,y.priority=y.priority?y.priority:p.priority;var _=n.get(y.template);return _?C(_):i.get(y.template,{cache:!0}).then(function(t){C(t.data)})["catch"](function(t){throw new Error("Template ("+y.template+") could not be loaded. "+t)}),v.promise};return y.forEach(function(t){C[t]=C.bind(this,t)}),C.clearAll=function(){angular.forEach(g,function(t){t.addClass("killed")})},C}]}),angular.module("ui-notification").run(["$templateCache",function(t){t.put("angular-ui-notification.html",'<div class="ui-notification"><h3 ng-show="title" ng-bind-html="title"></h3><div class="message" ng-bind-html="message"></div></div>')}]);