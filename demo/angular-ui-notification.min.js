/**
 * angular-ui-notification - Angular.js service providing simple notifications using Bootstrap 3 styles with css transitions for animating
 * @author Alex_Crack
 * @version v0.2.0
 * @link https://github.com/alexcrack/angular-ui-notification
 * @license MIT
 */
angular.module("ui-notification",[]),angular.module("ui-notification").provider("Notification",function(){this.options={delay:5e3,startTop:10,startRight:10,verticalSpacing:10,horizontalSpacing:10,positionX:"right",positionY:"top",replaceMessage:!1,templateUrl:"angular-ui-notification.html",onClose:void 0,closeOnClick:!0,maxCount:0},this.setOptions=function(e){if(!angular.isObject(e))throw new Error("Options should be an object!");this.options=angular.extend({},this.options,e)},this.$get=["$interval","$timeout","$http","$compile","$templateCache","$rootScope","$injector","$sce","$q","$window",function(e,t,n,i,o,s,a,l,r,c){var p=this.options,d=p.startTop,u=p.startRight,m=p.verticalSpacing,f=p.horizontalSpacing,g=p.delay,h=[],C=!1,v=function(a,v){var y=r.defer();return"object"!=typeof a&&(a={message:a}),a.scope=a.scope?a.scope:s,a.template=a.templateUrl?a.templateUrl:p.templateUrl,a.delay=angular.isUndefined(a.delay)?g:a.delay,a.type=v||p.type||"",a.positionY=a.positionY?a.positionY:p.positionY,a.positionX=a.positionX?a.positionX:p.positionX,a.replaceMessage=a.replaceMessage?a.replaceMessage:p.replaceMessage,a.onClose=a.onClose?a.onClose:p.onClose,a.closeOnClick=null!==a.closeOnClick&&void 0!==a.closeOnClick?a.closeOnClick:p.closeOnClick,n.get(a.template,{cache:o}).success(function(n){function o(e){["-webkit-transition","-o-transition","transition"].forEach(function(t){g.css(t,e)})}var s=a.scope.$new();s.message=l.trustAsHtml(a.message),s.title=l.trustAsHtml(a.title),s.t=a.type.substr(0,1),s.delay=a.delay,s.onClose=a.onClose;var r=function(){for(var e=0,t=0,n=d,i=u,o=[],s=h.length-1;s>=0;s--){var l=h[s];if(a.replaceMessage&&s<h.length-1)l.addClass("killed");else{var r=parseInt(l[0].offsetHeight),c=parseInt(l[0].offsetWidth),g=o[l._positionY+l._positionX];C+r>window.innerHeight&&(g=d,t++,e=0);var C=n=g?0===e?g:g+m:d,v=i+t*(f+c);l.css(l._positionY,C+"px"),"center"==l._positionX?l.css("left",parseInt(window.innerWidth/2-c/2)+"px"):l.css(l._positionX,v+"px"),o[l._positionY+l._positionX]=C+r,p.maxCount>0&&h.length>p.maxCount&&0===s&&l.scope().kill(!0),e++}}},g=i(n)(s);g._positionY=a.positionY,g._positionX=a.positionX,g.addClass(a.type);var v=function(e){e=e.originalEvent||e,("click"===e.type||"opacity"===e.propertyName&&e.elapsedTime>=1)&&(s.onClose&&s.$apply(s.onClose(g)),g.remove(),h.splice(h.indexOf(g),1),s.$destroy(),r())};a.closeOnClick&&(g.addClass("clickable"),g.bind("click",v)),g.bind("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd",v),angular.isNumber(a.delay)&&e(function(){g.addClass("killed")},a.delay,1),o("none"),angular.element(document.getElementsByTagName("body")).append(g);var k=-(parseInt(g[0].offsetHeight)+50);if(g.css(g._positionY,k+"px"),h.push(g),"center"==a.positionX){var w=parseInt(g[0].offsetWidth);g.css("left",parseInt(window.innerWidth/2-w/2)+"px")}t(function(){o("")}),s._templateElement=g,s.kill=function(e){e?(s.onClose&&s.$apply(s.onClose(s._templateElement)),h.splice(h.indexOf(s._templateElement),1),s._templateElement.remove(),s.$destroy(),t(r)):s._templateElement.addClass("killed")},t(r),C||(angular.element(c).bind("resize",function(e){t(r)}),C=!0),y.resolve(s)}).error(function(e){throw new Error("Template ("+a.template+") could not be loaded. "+e)}),y.promise};return v.primary=function(e){return this(e,"primary")},v.error=function(e){return this(e,"error")},v.success=function(e){return this(e,"success")},v.info=function(e){return this(e,"info")},v.warning=function(e){return this(e,"warning")},v.clearAll=function(){angular.forEach(h,function(e){e.addClass("killed")})},v}]}),angular.module("ui-notification").run(["$templateCache",function(e){e.put("angular-ui-notification.html",'<div class="ui-notification"><h3 ng-show="title" ng-bind-html="title"></h3><div class="message" ng-bind-html="message"></div></div>')}]);