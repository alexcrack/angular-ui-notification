angular.module("ui-notification",[]);angular.module("ui-notification").provider("Notification",function(){this.options={delay:5000,startTop:10,startRight:10,verticalSpacing:10,horizontalSpacing:10,positionX:"right",positionY:"top",replaceMessage:false,templateUrl:"angular-ui-notification.html",onClose:undefined,closeOnClick:true,maxCount:0,container:"body"};this.setOptions=function(a){if(!angular.isObject(a)){throw new Error("Options should be an object!")}this.options=angular.extend({},this.options,a)};this.$get=["$timeout","$http","$compile","$templateCache","$rootScope","$injector","$sce","$q","$window",function(p,r,o,e,f,k,h,n,i){var b=this.options;var d=b.startTop;var m=b.startRight;var l=b.verticalSpacing;var a=b.horizontalSpacing;var q=b.delay;var j=[];var c=false;var g=function(v,w){var s=n.defer();if(typeof v!=="object"){v={message:v}}v.scope=v.scope?v.scope:f;v.template=v.templateUrl?v.templateUrl:b.templateUrl;v.delay=!angular.isUndefined(v.delay)?v.delay:q;v.type=w||b.type||"";v.positionY=v.positionY?v.positionY:b.positionY;v.positionX=v.positionX?v.positionX:b.positionX;v.replaceMessage=v.replaceMessage?v.replaceMessage:b.replaceMessage;v.onClose=v.onClose?v.onClose:b.onClose;v.closeOnClick=(v.closeOnClick!==null&&v.closeOnClick!==undefined)?v.closeOnClick:b.closeOnClick;v.container=v.container?v.container:b.container;r.get(v.template,{cache:e}).then(function x(F){var C=F.data;var E=v.scope.$new();E.message=h.trustAsHtml(v.message);E.title=h.trustAsHtml(v.title);E.t=v.type.substr(0,1);E.delay=v.delay;E.onClose=v.onClose;var t=function(){var H=0;var G=0;var N=d;var P=m;var O=[];for(var I=j.length-1;I>=0;I--){var J=j[I];if(v.replaceMessage&&I<j.length-1){J.addClass("killed");continue}var L=parseInt(J[0].offsetHeight);var R=parseInt(J[0].offsetWidth);var K=O[J._positionY+J._positionX];if((M+L)>window.innerHeight){K=d;G++;H=0}var M=(N=K?(H===0?K:K+l):d);var Q=P+(G*(a+R));J.css(J._positionY,M+"px");if(J._positionX=="center"){J.css("left",parseInt(window.innerWidth/2-R/2)+"px")}else{J.css(J._positionX,Q+"px")}O[J._positionY+J._positionX]=M+L;if(b.maxCount>0&&j.length>b.maxCount&&I===0){J.scope().kill(true)}H++}};var y=o(C)(E);y._positionY=v.positionY;y._positionX=v.positionX;y.addClass(v.type);var B=function(G){G=G.originalEvent||G;if(G.type==="click"||(G.propertyName==="opacity"&&G.elapsedTime>=1)){if(E.onClose){E.$apply(E.onClose(y))}y.remove();j.splice(j.indexOf(y),1);E.$destroy();t()}};if(v.closeOnClick){y.addClass("clickable");y.bind("click",B)}y.bind("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd",B);if(angular.isNumber(v.delay)){p(function(){y.addClass("killed")},v.delay)}z("none");angular.element(document.querySelector(v.container)).append(y);var A=-(parseInt(y[0].offsetHeight)+50);y.css(y._positionY,A+"px");j.push(y);if(v.positionX=="center"){var D=parseInt(y[0].offsetWidth);y.css("left",parseInt(window.innerWidth/2-D/2)+"px")}p(function(){z("")});function z(G){["-webkit-transition","-o-transition","transition"].forEach(function(H){y.css(H,G)})}E._templateElement=y;E.kill=function(G){if(G){if(E.onClose){E.$apply(E.onClose(E._templateElement))}j.splice(j.indexOf(E._templateElement),1);E._templateElement.remove();E.$destroy();p(t)}else{E._templateElement.addClass("killed")}};p(t);if(!c){angular.element(i).bind("resize",function(G){p(t)});c=true}s.resolve(E)},function u(t){throw new Error("Template ("+v.template+") could not be loaded. "+t.data)});return s.promise};g.primary=function(s){return this(s,"primary")};g.error=function(s){return this(s,"error")};g.success=function(s){return this(s,"success")};g.info=function(s){return this(s,"info")};g.warning=function(s){return this(s,"warning")};g.clearAll=function(){angular.forEach(j,function(s){s.addClass("killed")})};return g}]});angular.module("ui-notification").run(["$templateCache",function(a){a.put("angular-ui-notification.html",'<div class="ui-notification"><h3 ng-show="title" ng-bind-html="title"></h3><div class="message" ng-bind-html="message"></div></div>')}]);